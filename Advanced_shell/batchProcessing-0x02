#!/bin/bash

# Configuration
POKEMON_LIST=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")
API_BASE="https://pokeapi.co/api/v2/pokemon"
DELAY_SECONDS=1
OUTPUT_DIR="pokemon_data"

# Create output directory if it doesn't exist
mkdir -p "$OUTPUT_DIR"

# Fetch data for each Pokémon
for pokemon in "${POKEMON_LIST[@]}"; do
    echo "Fetching data for $pokemon..."
    
    # Make the API request
    response=$(curl -s -f "${API_BASE}/${pokemon}" -o "${OUTPUT_DIR}/${pokemon}.json" 2>&1)
    
    # Check if request was successful
    if [ $? -eq 0 ]; then
        echo "Saved data to ${OUTPUT_DIR}/${pokemon}.json ✅"
    else
        echo "Error fetching $pokemon: $response" >&2
    fi
    
    # Delay between requests to avoid rate limiting
    sleep "$DELAY_SECONDS"
done

echo "All Pokémon data fetched successfully!"